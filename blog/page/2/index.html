
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Jonathan Birkholz</title>
  <meta name="author" content="Jonathan Birkholz">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://www.jonathanbirkholz.com/blog/page/2/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Jonathan Birkholz" type="application/atom+xml"/>
  

  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Jonathan Birkholz</a></h1>
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:www.jonathanbirkholz.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/04/reducing-exceptional-cases/">Reducing Exceptional Cases</a></h1>
    
    




<time datetime="2010-06-04 12:00:00 -0500" pubdate  updated >Jun 4<span>th</span>, 2010</time>



  </header>



  <div class="entry-content"><p>We have a third party control suite that provided some aggregation functionality. The third party controls had some built in aggregate functions but was missing some other more business centric functions.</p>

<p>We ended up coding every aggregate as a separate custom class and not using any of the built in aggregates. My team member asked me why not use the built in aggregates?</p>

<p>The reasoning is that if we used some built-in aggregates and then built the custom aggregates for the other functions, we would have 2 methods of aggregation to maintain. If we treat all the aggregates as custom, then instead of having 2 scenarios, we have one. We don’t have any exceptions. All aggregates are custom aggregates.</p>

<p>Not only do we simplify our code and future maintenance, we eliminate any dependency on the third party aggregates. Now we are free to change control vendors and not worry about losing our aggregation functionality.</p>

<p>The point I want to make is look to simplify your code. Eliminate exceptional cases as much as possible. Make everything the same and you achieve simplicity and flexibility.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/04/linq-sum/">Linq - Sum</a></h1>
    
    




<time datetime="2010-06-04 00:00:00 -0500" pubdate  updated >Jun 4<span>th</span>, 2010</time>



  </header>



  <div class="entry-content"><p>Last week I started an ongoing section during the Virtual Brown Bag where I go over a Linq function (or two). The general idea is that although most people ‘use’ Linq, there are lots of functions that are overlooked.</p>

<p>In this blog post I will demonstrate basic usage cases for the Linq Sum function.</p>

<h2>Numbers</h2>

<p>If you have a collection of numbers and you want the sum of their values, then  simply call Sum. It can’t get any easier.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">should_sum_values</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">nums</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span>
</div><div class='line'>                   <span class="p">{</span>
</div><div class='line'>                       <span class="m">5</span><span class="p">,</span>
</div><div class='line'>                       <span class="m">9</span><span class="p">,</span>
</div><div class='line'>                       <span class="m">1</span><span class="p">,</span>
</div><div class='line'>                       <span class="m">10</span>
</div><div class='line'>                   <span class="p">};</span>
</div><div class='line'>    <span class="kt">int</span> <span class="n">sum</span> <span class="p">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">Sum</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">sum</span><span class="p">.</span><span class="n">ShouldBe</span><span class="p">(</span><span class="m">25</span><span class="p">);</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<h2>Non-Numbers</h2>

<p>If you want to sum a collection that isn’t made up of numbers, then you will be forced to specify which number property you would like to sum.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
<span class='line'>24</span>
<span class='line'>25</span>
<span class='line'>26</span>
<span class='line'>27</span>
<span class='line'>28</span>
<span class='line'>29</span>
<span class='line'>30</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">summing_non_number_collection</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">jedi</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Jedi</span><span class="p">&gt;</span>
</div><div class='line'>                   <span class="p">{</span>
</div><div class='line'>                       <span class="k">new</span> <span class="nf">Jedi</span><span class="p">(</span><span class="s">&quot;Yoda&quot;</span><span class="p">).</span><span class="n">MidichlorianCountIs</span><span class="p">(</span><span class="m">1000</span><span class="p">),</span>
</div><div class='line'>                       <span class="k">new</span> <span class="nf">Jedi</span><span class="p">(</span><span class="s">&quot;Anakin Skywalker&quot;</span><span class="p">).</span><span class="n">MidichlorianCountIs</span><span class="p">(</span><span class="m">3000</span><span class="p">),</span>
</div><div class='line'>                       <span class="k">new</span> <span class="nf">Jedi</span><span class="p">(</span><span class="s">&quot;Luke Skywalker&quot;</span><span class="p">).</span><span class="n">MidichlorianCountIs</span><span class="p">(</span><span class="m">1500</span><span class="p">),</span>
</div><div class='line'>                       <span class="k">new</span> <span class="nf">Jedi</span><span class="p">(</span><span class="s">&quot;Obi-wan Kenobi&quot;</span><span class="p">).</span><span class="n">MidichlorianCountIs</span><span class="p">(</span><span class="m">500</span><span class="p">),</span>
</div><div class='line'>                   <span class="p">};</span>
</div><div class='line'>    <span class="c1">// can&#39;t compile</span>
</div><div class='line'>    <span class="c1">//var sum = jedi.Sum();</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'>
</div><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">should_be_able_to_specify_property_to_sum</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">jedi</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Jedi</span><span class="p">&gt;</span>
</div><div class='line'>                   <span class="p">{</span>
</div><div class='line'>                       <span class="k">new</span> <span class="nf">Jedi</span><span class="p">(</span><span class="s">&quot;Yoda&quot;</span><span class="p">).</span><span class="n">MidichlorianCountIs</span><span class="p">(</span><span class="m">1000</span><span class="p">),</span>
</div><div class='line'>                       <span class="k">new</span> <span class="nf">Jedi</span><span class="p">(</span><span class="s">&quot;Anakin Skywalker&quot;</span><span class="p">).</span><span class="n">MidichlorianCountIs</span><span class="p">(</span><span class="m">3000</span><span class="p">),</span>
</div><div class='line'>                       <span class="k">new</span> <span class="nf">Jedi</span><span class="p">(</span><span class="s">&quot;Luke Skywalker&quot;</span><span class="p">).</span><span class="n">MidichlorianCountIs</span><span class="p">(</span><span class="m">1500</span><span class="p">),</span>
</div><div class='line'>                       <span class="k">new</span> <span class="nf">Jedi</span><span class="p">(</span><span class="s">&quot;Obi-wan Kenobi&quot;</span><span class="p">).</span><span class="n">MidichlorianCountIs</span><span class="p">(</span><span class="m">500</span><span class="p">),</span>
</div><div class='line'>                   <span class="p">};</span>
</div><div class='line'>
</div><div class='line'>    <span class="kt">int</span> <span class="n">sum</span> <span class="p">=</span> <span class="n">jedi</span><span class="p">.</span><span class="n">Sum</span><span class="p">(</span><span class="n">j</span> <span class="p">=&gt;</span> <span class="n">j</span><span class="p">.</span><span class="n">MidichlorianCount</span><span class="p">);</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">sum</span><span class="p">.</span><span class="n">ShouldBe</span><span class="p">(</span><span class="m">6000</span><span class="p">);</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>These tests can be found in my Learning Solution on GitHub and found in the Learning CSharp project : <a href="http://github.com/RookieOne/Learning">http://github.com/RookieOne/Learning</a></p>
</div>
  
  


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/03/wizards-of-smart-6/">Wizards of Smart - Episode 6</a></h1>
    
    




<time datetime="2010-06-03 00:00:00 -0500" pubdate  updated >Jun 3<span>rd</span>, 2010</time>



  </header>



  <div class="entry-content"><p>The general theme for this podcast is handling Complexity through Composition. But we end up talking about Entity Framework, Fubu MVC, ISP, Rails, and reach new levels of nerdness with sentence composition.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/03/virtual-brown-bag/">Virtual Brown Bag - 6/3/2010</a></h1>
    
    




<time datetime="2010-06-03 00:00:00 -0500" pubdate  updated >Jun 3<span>rd</span>, 2010</time>



  </header>



  <div class="entry-content"><p>A rather link filled, topic filled VBB. Not many direct coding examples but lots of great information.</p>

<h2>LINQ Examples</h2>

<p>I did share how to use Sum, Select Many, and Aggregate. The code was put into my learning csharp project in my learning solution on GitHub.</p>

<p>I plan on writing a couple of blog posts on these LINQ items so stay tuned if you want more LINQ goodness.</p>

<p><a href="http://github.com/RookieOne/Learning">http://github.com/RookieOne/Learning</a></p>

<h2>Wizards of Smart Podcast – Episode 5</h2>

<p>More rails talk on this episode. But I did share the link with the VBB. <a href="http://www.theabsentmindedcoder.com/2010/06/wizards-of-smart-episode-5_01.html">http://www.theabsentmindedcoder.com/2010/06/wizards-of-smart-episode-5_01.html</a></p>

<h2>Absent Minded Coder Posts</h2>

<p>I shared my 2 posts from the last brown bag…</p>

<p>Structure Map 2.6 constructing the concrete type
<a href="http://www.theabsentmindedcoder.com/2010/05/structure-map-26-constructing-concrete.html">http://www.theabsentmindedcoder.com/2010/05/structure-map-26-constructing-concrete.html</a></p>

<p>Interface Segregation Principle
<a href="http://www.theabsentmindedcoder.com/2010/05/interface-segregation-principle-in.html">http://www.theabsentmindedcoder.com/2010/05/interface-segregation-principle-in.html</a></p>

<p>I also shared George’s comment on the Udi InfoQ article : <a href="http://www.infoq.com/presentations/Making-Roles-Explicit-Udi-Dahan">http://www.infoq.com/presentations/Making-Roles-Explicit-Udi-Dahan</a></p>

<h2>Unlocker</h2>

<p>Claudio shared a helpful tool to get rid of an annoying Windows error. <a href="http://ccollomb.free.fr/unlocker/">http://ccollomb.free.fr/unlocker/</a></p>

<h2>VS 2010 Step into .Net Framework</h2>

<p>Claudio also shared a blog post showing how to setup Visual Studio 2010 to allow stepping into .Net Framework code. <a href="http://weblogs.asp.net/rajbk/archive/2010/04/21/setting-up-visual-studio-2010-to-step-into-microsoft-net-source-code.aspx">http://weblogs.asp.net/rajbk/archive/2010/04/21/setting-up-visual-studio-2010-to-step-into-microsoft-net-source-code.aspx</a></p>

<h2>Why Your Code Sucks</h2>

<p>This might be my favorite link Claudio shared. The blog post talks about why your code sucks… yes he is talking to you. (and me…) :D</p>

<p><a href="http://www.artima.com/weblogs/viewpost.jsp?thread=71730">http://www.artima.com/weblogs/viewpost.jsp?thread=71730</a></p>

<h2>Resharper and Regions</h2>

<p>Find out how to configure Resharper to remove regions <a href="http://bit.ly/wtjK3">http://bit.ly/wtjK3</a></p>

<p>You can also prevent Resharper from adding regions <a href="http://bit.ly/9QgLYe">http://bit.ly/9QgLYe</a></p>

<h2>Monads</h2>

<p>Uncle Bob uploaded a WTF is a Monad presentation : <a href="http://bit.ly/aBMIaL">http://bit.ly/aBMIaL</a> &lt;- I plan to look at this tonight ;D</p>

<h2>Revamp Your Code Review</h2>

<p>Ryan wanted me to share a blog post by Kyle Baley discussing the code review process : <a href="http://codebetter.com/blogs/kyle.baley/archive/2010/06/01/rietveld-or-how-to-revamp-your-code-review-process.aspx">http://codebetter.com/blogs/kyle.baley/archive/2010/06/01/rietveld-or-how-to-revamp-your-code-review-process.aspx</a></p>

<h2>Nine Things ie9 is doing Right</h2>

<p>Ryan also wanted me to share : <a href="http://sixrevisions.com/web-development/five-things-ie9-is-actually-doing-right/">http://sixrevisions.com/web-development/five-things-ie9-is-actually-doing-right/</a></p>

<h2>RSA Animate - Drive: The surprising truth about what motivates us</h2>

<p>I think @TheCodeFoundary tweet’d this link earlier this week. It is an interesting video discussing how we are actually motivated by more than money. :D</p>

<p><a href="http://www.youtube.com/watch?v=u6XAPnuFjJc">http://www.youtube.com/watch?v=u6XAPnuFjJc</a></p>

<h2>Git + GitHub</h2>

<p>Claudio was asking about Git so I shared some links and walked through a simple workflow into how I commit locally and then push to my GitHub repository.</p>

<p>Git Extensions can be found here : <a href="http://sourceforge.net/projects/gitextensions/">http://sourceforge.net/projects/gitextensions/</a></p>

<p>We also discovered this : <a href="http://learn.github.com/">http://learn.github.com/</a></p>

<h2>Architecting TekPub</h2>

<p>Great article on InfoQ. In the article they interview James Avery and Rob Conery about their experience with TekPub going from MVC to Ruby on Rails and the reasoning why.</p>

<p><a href="http://www.infoq.com/articles/architecting-tekpub">http://www.infoq.com/articles/architecting-tekpub</a></p>

<h2>Future Rails Hands-On Demo?</h2>

<p>I tossed out the idea of having a rails hands on talk where as Claudio talks, I code the application in rails. The purpose is to showcase how rapidly we can build an application and deploy the application using rails.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/01/wizards-of-smart-5/">Wizards of Smart - Episode 5</a></h1>
    
    




<time datetime="2010-06-01 00:00:00 -0500" pubdate  updated >Jun 1<span>st</span>, 2010</time>



  </header>



  <div class="entry-content"><p>I recently was doing some volunteer work using Rails and started a conversation about my experience. This went on to general discussions on Ruby, Rails, and benefits of Dynamic Languages.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/05/31/interface-segregation-principle/">Interface Segregation Principle in Practice</a></h1>
    
    




<time datetime="2010-05-31 00:00:00 -0500" pubdate  updated >May 31<span>st</span>, 2010</time>



  </header>



  <div class="entry-content"><p>I am working with some other team members integrating components to be consumed by different controls. For example someone could use a grid and then opt in to have sorting or filtering etc. It is a rather weird system but was decided upon before I arrived.</p>

<p>Anyway, I am currently looking to implement an adapter for the formatting component. When I looked at the interface, ISP immediately jumped out at me. So I thought, why not do a blog post about identifying the problem and delivering the solution.</p>

<h2>Interface Segregation Principle</h2>

<blockquote><p>The Interface Segregation Principle states that clients should not be forced to implement interfaces they don’t use. Instead of one fat interface many small interfaces are preferred based on groups of methods, each one serving one submodule. - <a href="http://www.oodesign.com/interface-segregation-principle.html">http://www.oodesign.com/interface-segregation-principle.html</a></p></blockquote>

<p>So instead of one large interface we should have many smaller interfaces with grouped behavior.</p>

<p>When we see an interface like this, the violation of ISP should be readily apparent. (warning.. be prepared to scroll…..)</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
<span class='line'>24</span>
<span class='line'>25</span>
<span class='line'>26</span>
<span class='line'>27</span>
<span class='line'>28</span>
<span class='line'>29</span>
<span class='line'>30</span>
<span class='line'>31</span>
<span class='line'>32</span>
<span class='line'>33</span>
<span class='line'>34</span>
<span class='line'>35</span>
<span class='line'>36</span>
<span class='line'>37</span>
<span class='line'>38</span>
<span class='line'>39</span>
<span class='line'>40</span>
<span class='line'>41</span>
<span class='line'>42</span>
<span class='line'>43</span>
<span class='line'>44</span>
<span class='line'>45</span>
<span class='line'>46</span>
<span class='line'>47</span>
<span class='line'>48</span>
<span class='line'>49</span>
<span class='line'>50</span>
<span class='line'>51</span>
<span class='line'>52</span>
<span class='line'>53</span>
<span class='line'>54</span>
<span class='line'>55</span>
<span class='line'>56</span>
<span class='line'>57</span>
<span class='line'>58</span>
<span class='line'>59</span>
<span class='line'>60</span>
<span class='line'>61</span>
<span class='line'>62</span>
<span class='line'>63</span>
<span class='line'>64</span>
<span class='line'>65</span>
<span class='line'>66</span>
<span class='line'>67</span>
<span class='line'>68</span>
<span class='line'>69</span>
<span class='line'>70</span>
<span class='line'>71</span>
<span class='line'>72</span>
<span class='line'>73</span>
<span class='line'>74</span>
<span class='line'>75</span>
<span class='line'>76</span>
<span class='line'>77</span>
<span class='line'>78</span>
<span class='line'>79</span>
<span class='line'>80</span>
<span class='line'>81</span>
<span class='line'>82</span>
<span class='line'>83</span>
<span class='line'>84</span>
<span class='line'>85</span>
<span class='line'>86</span>
<span class='line'>87</span>
<span class='line'>88</span>
<span class='line'>89</span>
<span class='line'>90</span>
<span class='line'>91</span>
<span class='line'>92</span>
<span class='line'>93</span>
<span class='line'>94</span>
<span class='line'>95</span>
<span class='line'>96</span>
<span class='line'>97</span>
<span class='line'>98</span>
<span class='line'>99</span>
<span class='line'>100</span>
<span class='line'>101</span>
<span class='line'>102</span>
<span class='line'>103</span>
<span class='line'>104</span>
<span class='line'>105</span>
<span class='line'>106</span>
<span class='line'>107</span>
<span class='line'>108</span>
<span class='line'>109</span>
<span class='line'>110</span>
<span class='line'>111</span>
<span class='line'>112</span>
<span class='line'>113</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'><span class="c1">/// An interface defining the contract for anything that has columns that can be formatted.</span>
</div><div class='line'><span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'><span class="k">public</span> <span class="k">interface</span> <span class="n">IColumnFormattingAdapter</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="cp">#region Methods</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Hides the column.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">HideColumn</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Bests the fit header.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">BestFitHeader</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Bests the fit column.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">BestFitColumn</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Bests the fit header column.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">BestFitHeaderColumn</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Bests the fit all columns/headers.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">BestFitAllHeaderColumns</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Formats the column.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">FormatColumn</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Formats all columns.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">FormatAllColumns</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Shows the advanced formatting.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">ShowAdvancedFormatting</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Shows the advanced report formatting.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">ShowAdvancedReportFormatting</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Chooses the column.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">ChooseColumn</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="cp">#endregion</span>
</div><div class='line'>
</div><div class='line'>    <span class="cp">#region Feature Support</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports hiding of columns</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowHideColumn</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports best fit based on the header text</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowBestFitHeader</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports best fit based on the column contents</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowBestFitColumn</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports best fit based on the longer of header text and column contents</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowBestFitHeaderColumn</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports best fit on all columns based on the longer of header text and column contents</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowBestFitAllHeaderColumns</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports formatting of a column</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowFormatColumn</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports formatting of all columns</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowFormatAllColumns</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports advanced conditional formatting</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowAdvancedFormatting</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports advanced report property formatting</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowAdvancedReportFormatting</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports choosing columns</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowChooseColumn</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="cp">#endregion</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<h2>Identifying ISP Violation</h2>

<p>The first characteristic that the interface violates ISP is the sheer size. This interface weighs in at 117 lines. Granted there are comments, etc but it is still rather large.</p>

<p>The second characteristic that the interface violates ISP (and the biggest eye sore) is all the Allow properties. That should make you stop and scratch your head.</p>

<h2>Fixing the interface</h2>

<p>Let’s simplify the bad interface and then learn how to fix it.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
<span class='line'>24</span>
<span class='line'>25</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'><span class="c1">/// An interface defining the contract for anything that has columns that can be formatted.</span>
</div><div class='line'><span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'><span class="k">public</span> <span class="k">interface</span> <span class="n">IBadColumnFormattingAdapter</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Hides the column.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">HideColumn</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Chooses the column.</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="k">void</span> <span class="nf">ChooseColumn</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports hiding of columns</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowHideColumn</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>    <span class="c1">/// Whether or not the adapter supports choosing columns</span>
</div><div class='line'>    <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>    <span class="n">Boolean</span> <span class="n">AllowChooseColumn</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>So in this scenario we can hide a column and then choose a column. Instead of having a large interface for these two behaviors, we should package the behaviors into separate interfaces.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'><span class="c1">/// Interface for supporting Hide Column feature</span>
</div><div class='line'><span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'><span class="k">public</span> <span class="k">interface</span> <span class="n">IHideColumn</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>  <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>  <span class="c1">///Hides the column.</span>
</div><div class='line'>  <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>  <span class="k">void</span> <span class="nf">HideColumn</span><span class="p">();</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'><span class="c1">/// Interface for supporting Choose Column feature</span>
</div><div class='line'><span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'><span class="k">public</span> <span class="k">interface</span> <span class="n">IChooseColumn</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>   <span class="c1">/// &lt;summary&gt;</span>
</div><div class='line'>   <span class="c1">///Chooses the column.</span>
</div><div class='line'>   <span class="c1">/// &lt;/summary&gt;</span>
</div><div class='line'>   <span class="k">void</span> <span class="nf">ChooseColumn</span><span class="p">();</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>Now our functionality is encapsulated into behavior centric interfaces. Our adapters can then opt in to provide the functionality, and we don’t have the superfluous Allow properties.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/05/28/structure-map-concrete-type/">Structure Map 2.6 Constructing the Concrete Type</a></h1>
    
    




<time datetime="2010-05-28 00:00:00 -0500" pubdate  updated >May 28<span>th</span>, 2010</time>



  </header>



  <div class="entry-content"><h2>Basic Use with Func<T></h2>

<p>Ryan yet again was asking for how to do another crazy thing with Structure Map. :)</p>

<p>He wanted to know if there was a way to control the construction of a concrete type. Well.. he didn’t put it that way but it is what he wanted to know.</p>

<p>Besides the regular For<I>().Use<C>()… we have the ability to construct the concrete type ourselves with a simple action.</p>

<p>To demo this I have a Foo class that accepts a string in the constructor.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="k">class</span> <span class="nc">Foo</span> <span class="p">:</span> <span class="n">IFoo</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="k">public</span> <span class="nf">Foo</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
</div><div class='line'>    <span class="p">{</span>
</div><div class='line'>        <span class="n">Message</span> <span class="p">=</span> <span class="n">message</span><span class="p">;</span>
</div><div class='line'>    <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Message</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>We want to pass in the message explicitly so we configure our container and tell it how to provide the concrete implementation.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="n">_container</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Container</span><span class="p">();</span>
</div><div class='line'><span class="n">_container</span><span class="p">.</span><span class="n">Configure</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="n">Foo</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">)));</span>
</div></code></pre></td></tr></table></div></figure>

<p>And the tests to verify it works :</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">IFoo_should_resolve_to_Foo</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">foo</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">foo</span><span class="p">.</span><span class="n">ShouldBeType</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;();</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">message_should_be_set_during_construction</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">foo</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">foo</span><span class="p">.</span><span class="n">Message</span><span class="p">.</span><span class="n">ShouldBe</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">);</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<h2>Using Func&lt;IContext, T></h2>

<p>There are other scenarios where not only do you want more control on a concrete types construction, but also need to resolve other dependencies. SM also allows you to specify a Func&lt;IContext,T> where the IContext allows you to resolve classes from the container.</p>

<p>So if we have a scenario with an IBar and an IFoo:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="k">class</span> <span class="nc">Bar</span> <span class="p">:</span> <span class="n">IBar</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="k">public</span> <span class="n">IFoo</span> <span class="n">Foo</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="k">class</span> <span class="nc">Foo</span> <span class="p">:</span> <span class="n">IFoo</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="k">interface</span> <span class="n">IBar</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">IFoo</span> <span class="n">Foo</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="k">interface</span> <span class="n">IFoo</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>We can use the Func&lt;IContext,T> similar to how we used the Func<T>.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="n">_container</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Container</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'><span class="n">_container</span><span class="p">.</span><span class="n">Configure</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;();</span>
</div><div class='line'>    <span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IBar</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span>
</div><div class='line'>                          <span class="p">{</span>
</div><div class='line'>                              <span class="n">var</span> <span class="n">bar</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Bar</span><span class="p">();</span>
</div><div class='line'>                              <span class="n">bar</span><span class="p">.</span><span class="n">Foo</span> <span class="p">=</span> <span class="n">c</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;();</span>
</div><div class='line'>                              <span class="k">return</span> <span class="n">bar</span><span class="p">;</span>
</div><div class='line'>                          <span class="p">});</span>
</div><div class='line'><span class="p">});</span>
</div></code></pre></td></tr></table></div></figure>

<p>And naturally our test to verify it works:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">should_set_foo_property_on_bar</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">bar</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IBar</span><span class="p">&gt;();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">bar</span><span class="p">.</span><span class="n">Foo</span><span class="p">.</span><span class="n">ShouldBeType</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;();</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>So that was a brief introduction into using Funcs to provide the concrete implementation of an interface for Structure Map.</p>

<p>All the Learning Structure Map code can be found in my Learning solution on Git Hub : <a href="http://github.com/RookieOne/Learning">http://github.com/RookieOne/Learning</a></p>
</div>
  
  


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/05/27/virtual-brown-bag/">Virtual Brown Bag 5/27/2010</a></h1>
    
    




<time datetime="2010-05-27 12:00:00 -0500" pubdate  updated >May 27<span>th</span>, 2010</time>



  </header>



  <div class="entry-content"><p>Claudio was a no show today. As I predicted he had meetings he could not get out of.</p>

<p>But we powered through and covered a range of topics.</p>

<h2>Wizards of Smart podcasts</h2>

<p>Since our last meeting there have been 2 episodes of Wizards of Smart.</p>

<p>Episode 3 – Testing : <a href="http://www.theabsentmindedcoder.com/2010/05/wizards-of-smart-episode-3-testing.html">http://www.theabsentmindedcoder.com/2010/05/wizards-of-smart-episode-3-testing.html</a></p>

<p>Episode 4 – Code Reviews, Work Environment, Developers : <a href="http://www.theabsentmindedcoder.com/2010/05/wizards-of-smart-episode-4.html">http://www.theabsentmindedcoder.com/2010/05/wizards-of-smart-episode-4.html</a></p>

<p>Ruby on Rails
I talked a bit about my experience this week with Ruby on Rails. In particular I pointed out how I enjoyed the migration functionality.</p>

<p><a href="http://guides.rubyonrails.org/migrations.html">http://guides.rubyonrails.org/migrations.html</a></p>

<p>Alper pointed out that c4mvc also has a session on some .net tools for migration :</p>

<p><a href="http://www.c4mvc.net/Home/Events">http://www.c4mvc.net/Home/Events</a> –> March Show and Tell : Topic Database Migration Frameworks : MigratorDotNet and RikMigrations</p>

<p>I also point out the Dev Chix wiki for learning Ruby on Rails : <a href="http://wiki.devchix.com/index.php?title=Server_2003">http://wiki.devchix.com/index.php?title=Server_2003</a></p>

<p>The guide walks through every step from installing Ruby, rails gems, setting up git, heroku, and pushing your app to heroku. It’s a great guide for those new to rails (like me!)</p>

<h2>SQLite Database Browser</h2>

<p>I pointed out this tool for looking at Sqlite databases. I am using it to look at my rails database.</p>

<p><a href="http://sourceforge.net/projects/sqlitebrowser/">http://sourceforge.net/projects/sqlitebrowser/</a></p>

<h2>Domain Driven Design</h2>

<p>Ed asked about DDD for everyday apps. I then fumbled around and gave a high level talk on how to apply some DDD principles to everyday code. I think I will work on a presentation on the subject because I find it an interesting perspective.</p>

<p>We did point out some DDD resources :</p>

<p>Greg Young on Herding Code : <a href="http://herdingcode.com/?p=189">http://herdingcode.com/?p=189</a></p>

<p>Greg Young on InfoQ : <a href="http://www.infoq.com/interviews/greg-young-ddd">http://www.infoq.com/interviews/greg-young-ddd</a></p>

<p>David Laribee on Deep Fried Bytes : <a href="http://deepfriedbytes.com/podcast/episode-6-talking-domain-driven-design-with-david-laribee-part-1/">http://deepfriedbytes.com/podcast/episode-6-talking-domain-driven-design-with-david-laribee-part-1/</a></p>

<p>Eric Evan’s book : <a href="http://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1274981635&amp;sr=8-1">http://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1274981635&amp;sr=8-1</a></p>

<p>Jimmy Nilsson’s book : <a href="http://www.amazon.com/Applying-Domain-Driven-Design-Patterns-Examples/dp/0321268202/ref=sr_1_2?ie=UTF8&amp;s=books&amp;qid=1274981635&amp;sr=8-2">http://www.amazon.com/Applying-Domain-Driven-Design-Patterns-Examples/dp/0321268202/ref=sr_1_2?ie=UTF8&amp;s=books&amp;qid=1274981635&amp;sr=8-2</a></p>

<p>Houston Techfest
I mentioned the Houston Techfest again and discussed some potential presentations Claudio and I might be doing.</p>

<p><a href="http://www.houstontechfest.com/dotnetnuke/default.aspx">http://www.houstontechfest.com/dotnetnuke/default.aspx</a></p>

<p>They are still taking abstracts. Email your abstracts and bio to speakers@houstontechfest.com</p>

<h2>Linq</h2>

<p>I walked through some linq examples that can be found in my learning C# project in my Learning Repository : <a href="http://github.com/RookieOne/Learning">http://github.com/RookieOne/Learning</a></p>

<p>We looked at Select, my pet peeve of using a Where and then FirstorDefault, and also how to use Any instead of Count to verify if a list is not empty.</p>

<p>I took a poll and there was a lot of interest in doing more Linq best practices and techniques. I am working on a presentation as well and it was nice to see there was a good deal of interest.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/05/27/wizards-of-smart-4/">Wizards of Smart - Episode 4</a></h1>
    
    




<time datetime="2010-05-27 00:00:00 -0500" pubdate  updated >May 27<span>th</span>, 2010</time>



  </header>



  <div class="entry-content"><p>Ryan and I talk about code reviews, work environment, and some traits of a good developer.</p>
</div>
  
  


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/05/26/structure-map-constructor/">Structure Map 2.6 Constructor Arguments</a></h1>
    
    




<time datetime="2010-05-26 00:00:00 -0500" pubdate  updated >May 26<span>th</span>, 2010</time>



  </header>



  <div class="entry-content"><h2>Constructor Injection</h2>

<p>When we use an IoC tool the most basic functionality we expect is to have constructor injection. That means if we have a type we are resolving and one of the constructor’s parameters is also a type, the container will resolve that type as well.</p>

<p>And turtles all the way down…</p>

<p>If we have two types(Foo : IFoo and Bar : IBar) and in Bar’s constructor it has an IFoo parameter, we should expect the IFoo parameter to be resolved to an instance of Foo.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="k">class</span> <span class="nc">Bar</span> <span class="p">:</span> <span class="n">IBar</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="k">public</span> <span class="nf">Bar</span><span class="p">(</span><span class="n">IFoo</span> <span class="n">foo</span><span class="p">)</span>
</div><div class='line'>    <span class="p">{</span>
</div><div class='line'>        <span class="n">Foo</span> <span class="p">=</span> <span class="n">foo</span><span class="p">;</span>
</div><div class='line'>    <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="k">public</span> <span class="n">IFoo</span> <span class="n">Foo</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>Our container is setup like :</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="n">_container</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Container</span><span class="p">();</span>
</div><div class='line'>
</div><div class='line'><span class="n">_container</span><span class="p">.</span><span class="n">Configure</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span>
</div><div class='line'>                         <span class="p">{</span>
</div><div class='line'>                             <span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;();</span>
</div><div class='line'>                             <span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IBar</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">&lt;</span><span class="n">Bar</span><span class="p">&gt;();</span>
</div><div class='line'>                         <span class="p">});</span>
</div></code></pre></td></tr></table></div></figure>

<p>We then expect :</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">IBar_should_resolve_to_Bar</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">bar</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IBar</span><span class="p">&gt;();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">bar</span><span class="p">.</span><span class="n">ShouldBeType</span><span class="p">&lt;</span><span class="n">Bar</span><span class="p">&gt;();</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">IBars_IFoo_dependency_should_resolve_to_Foo</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">bar</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IBar</span><span class="p">&gt;();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">bar</span><span class="p">.</span><span class="n">Foo</span><span class="p">.</span><span class="n">ShouldBeType</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;();</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<h2>Constructor Arguments</h2>

<p>Sometimes you need to specify the exact argument for a given type when it is constructed. Structure Map allows you to provide specific values for resolving a constructors argument.</p>

<p>For example, Ryan was asking if there is a method with SM to resolve an “id” value from an HttpContext. I know SM has some fancy session management lifecycle features built in, but since I don’t live in the Web world I have never explored what can and can not be done with those features.</p>

<p>What I do know is that I can specify where my “id” parameter comes from.</p>

<p>Let’s look at this simple example.</p>

<p>In my scenario I have a Foo class.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="k">class</span> <span class="nc">Foo</span> <span class="p">:</span> <span class="n">IFoo</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="k">public</span> <span class="nf">Foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="n">IBar</span> <span class="n">bar</span><span class="p">)</span>
</div><div class='line'>    <span class="p">{</span>
</div><div class='line'>        <span class="n">Id</span> <span class="p">=</span> <span class="n">id</span><span class="p">;</span>
</div><div class='line'>        <span class="n">Bar</span> <span class="p">=</span> <span class="n">bar</span><span class="p">;</span>
</div><div class='line'>    <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>    <span class="k">public</span> <span class="n">IBar</span> <span class="n">Bar</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>The id that is passed into Foo is providing by some mysterious X. In my case my X is an IIdProvider.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="k">class</span> <span class="nc">IdProvider</span> <span class="p">:</span> <span class="n">IIdProvider</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="k">public</span> <span class="kt">int</span> <span class="nf">GetId</span><span class="p">()</span>
</div><div class='line'>    <span class="p">{</span>
</div><div class='line'>        <span class="k">return</span> <span class="m">1</span><span class="p">;</span>
</div><div class='line'>    <span class="p">}</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>Now I want to tell SM that when it resolves an IFoo, I want it to use the IIdProvider to get the “id”.</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;()</span>
</div><div class='line'>    <span class="p">.</span><span class="n">Ctor</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="s">&quot;id&quot;</span><span class="p">)</span>
</div><div class='line'>    <span class="p">.</span><span class="n">Is</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IIdProvider</span><span class="p">&gt;().</span><span class="n">GetId</span><span class="p">());</span>
</div></code></pre></td></tr></table></div></figure>

<p>All together the configuration is:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="n">_container</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Container</span><span class="p">();</span>
</div><div class='line'><span class="n">_container</span><span class="p">.</span><span class="n">Configure</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span>
</div><div class='line'>                         <span class="p">{</span>
</div><div class='line'>                             <span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IIdProvider</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">&lt;</span><span class="n">IdProvider</span><span class="p">&gt;();</span>
</div><div class='line'>                             <span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IBar</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">&lt;</span><span class="n">Bar</span><span class="p">&gt;();</span>
</div><div class='line'>                             <span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;()</span>
</div><div class='line'>                                 <span class="p">.</span><span class="n">Ctor</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="s">&quot;id&quot;</span><span class="p">)</span>
</div><div class='line'>                                 <span class="p">.</span><span class="n">Is</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IIdProvider</span><span class="p">&gt;().</span><span class="n">GetId</span><span class="p">());</span>
</div><div class='line'>                         <span class="p">});</span>
</div></code></pre></td></tr></table></div></figure>

<p>And my tests to verify it works:</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">should_resolve_Bar</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">foo</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">foo</span><span class="p">.</span><span class="n">Bar</span><span class="p">.</span><span class="n">ShouldBeType</span><span class="p">&lt;</span><span class="n">Bar</span><span class="p">&gt;();</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">should_resolve_id</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">foo</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">foo</span><span class="p">.</span><span class="n">Id</span><span class="p">.</span><span class="n">ShouldBe</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<h2>Lazy Constructor Arguments</h2>

<p>Then Ryan tells me, he would really like to be lazy because he might not need the id for all requests. There are some Lazy features added to SM 2.6 but let’s just use what we already know to solve this problem.</p>

<p>Instead of having an int Id parameter, let’s have a Func<int> getId parameter.</p>

<p>Foo changes to :</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="k">class</span> <span class="nc">Foo</span> <span class="p">:</span> <span class="n">IFoo</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="k">public</span> <span class="nf">Foo</span><span class="p">(</span><span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">getId</span><span class="p">,</span> <span class="n">IBar</span> <span class="n">bar</span><span class="p">)</span>
</div><div class='line'>    <span class="p">{</span>
</div><div class='line'>        <span class="n">GetId</span> <span class="p">=</span> <span class="n">getId</span><span class="p">;</span>
</div><div class='line'>        <span class="n">Bar</span> <span class="p">=</span> <span class="n">bar</span><span class="p">;</span>
</div><div class='line'>    <span class="p">}</span>
</div><div class='line'>
</div><div class='line'>    <span class="k">public</span> <span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">GetId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'>    <span class="k">public</span> <span class="n">IBar</span> <span class="n">Bar</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>Now our constructor configuration changes to :</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="n">x</span><span class="p">.</span><span class="n">For</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;().</span><span class="n">Use</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;()</span>
</div><div class='line'>    <span class="p">.</span><span class="n">Ctor</span><span class="p">&lt;</span><span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;&gt;(</span><span class="s">&quot;getId&quot;</span><span class="p">)</span>
</div><div class='line'>    <span class="p">.</span><span class="n">Is</span><span class="p">(</span><span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IIdProvider</span><span class="p">&gt;().</span><span class="n">GetId</span><span class="p">);</span>
</div></code></pre></td></tr></table></div></figure>

<p>And our tests become :</p>

<figure role=code><div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
</pre></td><td class='code' width='100%'><pre><code class='csharp'><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">should_resolve_Bar</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">foo</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">foo</span><span class="p">.</span><span class="n">Bar</span><span class="p">.</span><span class="n">ShouldBeType</span><span class="p">&lt;</span><span class="n">Bar</span><span class="p">&gt;();</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="na">[Test]</span>
</div><div class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">should_resolve_id</span><span class="p">()</span>
</div><div class='line'><span class="p">{</span>
</div><div class='line'>    <span class="n">var</span> <span class="n">foo</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">&lt;</span><span class="n">IFoo</span><span class="p">&gt;();</span>
</div><div class='line'>
</div><div class='line'>    <span class="n">foo</span><span class="p">.</span><span class="n">GetId</span><span class="p">().</span><span class="n">ShouldBe</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</div><div class='line'><span class="p">}</span>
</div></code></pre></td></tr></table></div></figure>

<p>Yes it is a poor man’s lazy instantiation. But in many ways its the clearest way to have the functionality.</p>

<p>You can find all this code in my Git Hub Learning Repository and the Learning Structure Map solution : <a href="http://github.com/RookieOne/Learning">http://github.com/RookieOne/Learning</a></p>
</div>
  
  


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</nav>

</div>
<aside role=sidebar>
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2010/10/29/learning-bash/">Learning Bash Aliases and Functions</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/26/techfest-design-patterns/">Houston Techfest - Design Patterns</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/09/11/lighten-color/">Lighten Color in C#</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/07/29/wizards-of-smart-11/">Wizards of Smart #11 - Glenn Block part 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/06/24/wizards-of-smart-10/">Wizards of Smart #10 - Glenn Block part 1</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rookieone", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rookieone" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @rookieone</a>
  
</section>




  
</aside>

    </div>
  </div>
  <footer><p>
  Copyright &copy; 2011 - Jonathan Birkholz -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
